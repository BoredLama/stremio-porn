{"version":3,"sources":["../src/server.js"],"names":["httpHandler","require","server","http","createServer","Config","IS_PROD","ID","DEFAULT_ID","console","error","chalk","red","process","exit","on","values","endpoint","green","ENDPOINT","id","email","EMAIL","env","proxy","PROXY","cache","CACHE","log","PORT","listen"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAEA,MAAMA,cAAcC,QAAQ,YAAR,CAApB;;AAEA,IAAIC,SAASC,cAAKC,YAAL,CAAkBJ,WAAlB,CAAb;;AAEA,IAAIK,gBAAOC,OAAP,IAAkBD,gBAAOE,EAAP,KAAcF,gBAAOG,UAA3C,EAAuD;AACrD;AACAC,UAAQC,KAAR,CACEC,eAAMC,GAAN,CACE,kFADF,CADF;AAKAC,UAAQC,IAAR,CAAa,CAAb;AACD,C,CAED;;AACE;AACF;AACA;AACA;AACA;AACA;;;AAEAZ,OACGa,EADH,CACM,WADN,EACmB,MAAM;AACrB,MAAIC,SAAS;AACXC,cAAUN,eAAMO,KAAN,CAAa,GAAEb,gBAAOc,QAAS,gBAA/B,CADC;AAEXC,QAAIf,gBAAOE,EAAP,KAAcF,gBAAOG,UAArB,GAAkCG,eAAMC,GAAN,CAAUP,gBAAOE,EAAjB,CAAlC,GAAyDI,eAAMO,KAAN,CAAYb,gBAAOE,EAAnB,CAFlD;AAGXc,WAAOhB,gBAAOiB,KAAP,GAAeX,eAAMO,KAAN,CAAYb,gBAAOiB,KAAnB,CAAf,GAA2CX,eAAMC,GAAN,CAAU,WAAV,CAHvC;AAIXW,SAAKlB,gBAAOC,OAAP,GAAiBK,eAAMO,KAAN,CAAY,YAAZ,CAAjB,GAA6CP,eAAMO,KAAN,CAAY,aAAZ,CAJvC;AAKXM,WAAOnB,gBAAOoB,KAAP,GAAed,eAAMO,KAAN,CAAYb,gBAAOoB,KAAnB,CAAf,GAA2Cd,eAAMC,GAAN,CAAU,KAAV,CALvC;AAMXc,WAAQrB,gBAAOsB,KAAP,KAAiB,GAAlB,GACLhB,eAAMC,GAAN,CAAU,KAAV,CADK,GAELD,eAAMO,KAAN,CAAYb,gBAAOsB,KAAP,KAAiB,GAAjB,GAAuB,IAAvB,GAA8BtB,gBAAOsB,KAAjD,CARS,CAWb;;AAXa,GAAb;AAYAlB,UAAQmB,GAAR,CAAa,mCAAkCvB,gBAAOwB,IAAK;;mBAE5Cb,OAAOC,QAAS;mBAChBD,OAAOI,EAAG;mBACVJ,OAAOK,KAAM;mBACbL,OAAOO,GAAI;mBACXP,OAAOQ,KAAM;mBACbR,OAAOU,KAAM;KAP5B;AASD,CAvBH,EAwBGI,MAxBH,CAwBUzB,gBAAOwB,IAxBjB;eA0Be3B,M","sourcesContent":["import http from 'http'\nimport chalk from 'chalk'\nimport Config from './config'\n\nconst httpHandler = require('./index.js')\n\nlet server = http.createServer(httpHandler)\n\nif (Config.IS_PROD && Config.ID === Config.DEFAULT_ID) {\n  // eslint-disable-next-line no-console\n  console.error(\n    chalk.red(\n      '\\nWhen running in production, a non-default addon identifier must be specified\\n'\n    )\n  )\n  process.exit(1)\n}\n\n//if (Config.IS_PROD) {\n  /* eslint-disable no-console */\n//  console.log(\n//    chalk.green(`Publishing to Stremio central: ${Config.ENDPOINT}/manifest.json`)\n//  )\n//  publishToCentral(`${Config.ENDPOINT}/manifest.json`)\n//}\n\nserver\n  .on('listening', () => {\n    let values = {\n      endpoint: chalk.green(`${Config.ENDPOINT}/manifest.json`),\n      id: Config.ID === Config.DEFAULT_ID ? chalk.red(Config.ID) : chalk.green(Config.ID),\n      email: Config.EMAIL ? chalk.green(Config.EMAIL) : chalk.red('undefined'),\n      env: Config.IS_PROD ? chalk.green('production') : chalk.green('development'),\n      proxy: Config.PROXY ? chalk.green(Config.PROXY) : chalk.red('off'),\n      cache: (Config.CACHE === '0') ?\n        chalk.red('off') :\n        chalk.green(Config.CACHE === '1' ? 'on' : Config.CACHE),\n    }\n\n    // eslint-disable-next-line no-console\n    console.log(`Porn Addon is listening on port ${Config.PORT}\n\n    Endpoint:    ${values.endpoint}\n    Addon Id:    ${values.id}\n    Email:       ${values.email}\n    Environment: ${values.env}\n    Proxy:       ${values.proxy}\n    Cache:       ${values.cache}\n    `)\n  })\n  .listen(Config.PORT)\n\nexport default server\n"],"file":"server.js"}