{"version":3,"sources":["../src/server.js"],"names":["httpHandler","require","server","http","createServer","Config","IS_PROD","ID","DEFAULT_ID","console","error","chalk","red","process","exit","log","green","ENDPOINT","publishToCentral","on","values","endpoint","id","email","EMAIL","env","proxy","PROXY","cache","CACHE","PORT","listen"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAEA,MAAMA,cAAcC,QAAQ,YAAR,CAApB;;AAEA,IAAIC,SAASC,cAAKC,YAAL,CAAkBJ,WAAlB,CAAb;;AAEA,IAAIK,gBAAOC,OAAP,IAAkBD,gBAAOE,EAAP,KAAcF,gBAAOG,UAA3C,EAAuD;AACrD;AACAC,UAAQC,KAAR,CACEC,eAAMC,GAAN,CACE,kFADF,CADF;AAKAC,UAAQC,IAAR,CAAa,CAAb;AACD;;AAED,IAAIT,gBAAOC,OAAX,EAAoB;AAClB;AACAG,UAAQM,GAAR,CACEJ,eAAMK,KAAN,CAAa,kCAAiCX,gBAAOY,QAAS,gBAA9D,CADF;AAGAC,mBAAkB,GAAEb,gBAAOY,QAAS,gBAApC;AACD;;AAEDf,OACGiB,EADH,CACM,WADN,EACmB,MAAM;AACrB,MAAIC,SAAS;AACXC,cAAUV,eAAMK,KAAN,CAAa,GAAEX,gBAAOY,QAAS,gBAA/B,CADC;AAEXK,QAAIjB,gBAAOE,EAAP,KAAcF,gBAAOG,UAArB,GAAkCG,eAAMC,GAAN,CAAUP,gBAAOE,EAAjB,CAAlC,GAAyDI,eAAMK,KAAN,CAAYX,gBAAOE,EAAnB,CAFlD;AAGXgB,WAAOlB,gBAAOmB,KAAP,GAAeb,eAAMK,KAAN,CAAYX,gBAAOmB,KAAnB,CAAf,GAA2Cb,eAAMC,GAAN,CAAU,WAAV,CAHvC;AAIXa,SAAKpB,gBAAOC,OAAP,GAAiBK,eAAMK,KAAN,CAAY,YAAZ,CAAjB,GAA6CL,eAAMK,KAAN,CAAY,aAAZ,CAJvC;AAKXU,WAAOrB,gBAAOsB,KAAP,GAAehB,eAAMK,KAAN,CAAYX,gBAAOsB,KAAnB,CAAf,GAA2ChB,eAAMC,GAAN,CAAU,KAAV,CALvC;AAMXgB,WAAQvB,gBAAOwB,KAAP,KAAiB,GAAlB,GACLlB,eAAMC,GAAN,CAAU,KAAV,CADK,GAELD,eAAMK,KAAN,CAAYX,gBAAOwB,KAAP,KAAiB,GAAjB,GAAuB,IAAvB,GAA8BxB,gBAAOwB,KAAjD,CARS,CAWb;;AAXa,GAAb;AAYApB,UAAQM,GAAR,CAAa,mCAAkCV,gBAAOyB,IAAK;;mBAE5CV,OAAOC,QAAS;mBAChBD,OAAOE,EAAG;mBACVF,OAAOG,KAAM;mBACbH,OAAOK,GAAI;mBACXL,OAAOM,KAAM;mBACbN,OAAOQ,KAAM;KAP5B;AASD,CAvBH,EAwBGG,MAxBH,CAwBU1B,gBAAOyB,IAxBjB;eA0Be5B,M","sourcesContent":["import http from 'http'\nimport chalk from 'chalk'\nimport Config from './config'\n\nconst httpHandler = require('./index.js')\n\nlet server = http.createServer(httpHandler)\n\nif (Config.IS_PROD && Config.ID === Config.DEFAULT_ID) {\n  // eslint-disable-next-line no-console\n  console.error(\n    chalk.red(\n      '\\nWhen running in production, a non-default addon identifier must be specified\\n'\n    )\n  )\n  process.exit(1)\n}\n\nif (Config.IS_PROD) {\n  /* eslint-disable no-console */\n  console.log(\n    chalk.green(`Publishing to Stremio central: ${Config.ENDPOINT}/manifest.json`)\n  )\n  publishToCentral(`${Config.ENDPOINT}/manifest.json`)\n}\n\nserver\n  .on('listening', () => {\n    let values = {\n      endpoint: chalk.green(`${Config.ENDPOINT}/manifest.json`),\n      id: Config.ID === Config.DEFAULT_ID ? chalk.red(Config.ID) : chalk.green(Config.ID),\n      email: Config.EMAIL ? chalk.green(Config.EMAIL) : chalk.red('undefined'),\n      env: Config.IS_PROD ? chalk.green('production') : chalk.green('development'),\n      proxy: Config.PROXY ? chalk.green(Config.PROXY) : chalk.red('off'),\n      cache: (Config.CACHE === '0') ?\n        chalk.red('off') :\n        chalk.green(Config.CACHE === '1' ? 'on' : Config.CACHE),\n    }\n\n    // eslint-disable-next-line no-console\n    console.log(`Porn Addon is listening on port ${Config.PORT}\n\n    Endpoint:    ${values.endpoint}\n    Addon Id:    ${values.id}\n    Email:       ${values.email}\n    Environment: ${values.env}\n    Proxy:       ${values.proxy}\n    Cache:       ${values.cache}\n    `)\n  })\n  .listen(Config.PORT)\n\nexport default server\n"],"file":"server.js"}