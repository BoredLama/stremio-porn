{"version":3,"sources":["../../src/adapters/YouPorn.js"],"names":["YouPorn","HubTrafficAdapter","_makeMethodUrl","method","methodAliases","searchVideos","getVideoById","_makeEmbedUrl","id","_extractStreamsFromEmbed","body","regexp","urlMatches","match","length","Error","map","item","url","replace","qualityMatch","quality","toLowerCase"],"mappings":";;;;;;;AAAA;;;;;;AAGA,MAAMA,OAAN,SAAsBC,0BAAtB,CAAwC;AAKtCC,iBAAeC,MAAf,EAAuB;AACrB,QAAIC,gBAAgB;AAClBC,oBAAc,QADI;AAElBC,oBAAc;AAFI,KAApB;AAIA,WAAQ,0CAAyCF,cAAcD,MAAd,CAAsB,EAAvE;AACD;;AAEDI,gBAAcC,EAAd,EAAkB;AAChB,WAAQ,gCAA+BA,EAAG,EAA1C;AACD;;AAEDC,2BAAyBC,IAAzB,EAA+B;AAC7B;AACA;AACA;AACA,QAAIC,SAAS,yEAAb;AACA;;AAEA,QAAIC,aAAaF,KAAKG,KAAL,CAAWF,MAAX,CAAjB;;AAEA,QAAI,CAACC,UAAD,IAAe,CAACA,WAAWE,MAA/B,EAAuC;AACrC,YAAM,IAAIC,KAAJ,CAAU,8CAAV,CAAN;AACD;;AAED,WAAOH,WAAWI,GAAX,CAAgBC,IAAD,IAAU;AAC9B,UAAIC,MAAMD,KACPJ,KADO,CACD,QADC,EACS,CADT,EACY;AADZ,OAEPM,OAFO,CAEC,SAFD,EAEY,GAFZ,EAEiB;AAFjB,OAGPA,OAHO,CAGC,aAHD,EAGgB,KAHhB,CAAV,CAD8B,CAIG;;AACjC,UAAIC,eAAeF,IAAIL,KAAJ,CAAU,WAAV,CAAnB;AACA,UAAIQ,UAAUD,gBAAgBA,aAAa,CAAb,EAAgBE,WAAhB,EAA9B;;AAEA,UAAIJ,IAAI,CAAJ,MAAW,GAAf,EAAoB;AAClBA,cAAO,UAASA,GAAI,EAApB;AACD;;AAED,aAAO;AAAEA,WAAF;AAAOG;AAAP,OAAP;AACD,KAbM,CAAP;AAcD;;AA5CqC;;gDAAlCrB,O,kBACkB,S,qBACE,E,aACR,CAAC,UAAD,EAAa,MAAb,EAAqB,OAArB,EAA8B,OAA9B,EAAuC,QAAvC,EAAiD,MAAjD,EAAyD,QAAzD,EAAmE,YAAnE,EAAiF,MAAjF,EAAyF,MAAzF,EAAiG,QAAjG,EAA2G,KAA3G,C;;eA6CHA,O","sourcesContent":["import HubTrafficAdapter from './HubTrafficAdapter'\n\n\nclass YouPorn extends HubTrafficAdapter {\n  static DISPLAY_NAME = 'YouPorn'\n  static ITEMS_PER_PAGE = 29\n  static GENRES = ['straight', 'milf', 'asian', 'ebony', 'latina', 'arab', 'hentai', 'babysitter', 'anal', 'orgy', 'public', 'gay']\n\n  _makeMethodUrl(method) {\n    let methodAliases = {\n      searchVideos: 'search',\n      getVideoById: 'video_by_id',\n    }\n    return `https://www.youporn.com/api/webmasters/${methodAliases[method]}`\n  }\n\n  _makeEmbedUrl(id) {\n    return `http://www.youporn.com/embed/${id}`\n  }\n\n  _extractStreamsFromEmbed(body) {\n    /* eslint-disable max-len */\n    // URL example:\n    // https:\\/\\/ee.ypncdn.com\\/201709\\/01\\/14062051\\/720p_1500k_14062051\\/YouPorn_-_mia-khalifa-big-tits-arab-pornstar-takes-a-fan-s-virginity.mp4?rate=193k&burst=1400k&validfrom=1524765800&validto=1524780200&hash=EGRxkAOZwod648gfnITHeyb%2Fzi8%3D\n    let regexp = /videoUrl[\"']?\\s*:\\s*[\"']?(https?:\\\\?\\/\\\\?\\/[a-z]+\\.ypncdn\\.com[^\"']+)/gi\n    /* eslint-enable max-len */\n\n    let urlMatches = body.match(regexp)\n\n    if (!urlMatches || !urlMatches.length) {\n      throw new Error('Unable to extract streams from an embed page')\n    }\n\n    return urlMatches.map((item) => {\n      let url = item\n        .match(/http.+/)[0] // Extract the URL\n        .replace(/[\\\\/]+/g, '/') // Normalize the slashes...\n        .replace(/(https?:\\/)/, '$1/') // ...but keep the // after \"https:\"\n      let qualityMatch = url.match(/\\/(\\d+p)/i)\n      let quality = qualityMatch && qualityMatch[1].toLowerCase()\n\n      if (url[0] === '/') {\n        url = `https:/${url}`\n      }\n\n      return { url, quality }\n    })\n  }\n}\n\n\nexport default YouPorn\n"],"file":"YouPorn.js"}